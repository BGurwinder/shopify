<div class="features-section page-width section-{{ section.id }}-padding">
  <div
    class="features-grid grid grid--1-col grid--3-col-tablet"
    style="
      gap: {{ section.settings.grid_gap }}px;
      justify-content: {{ section.settings.grid_alignment }};
    "
  >
    {% for block in section.blocks %}
      <div
        class="feature-item grid__item"
        style="
          text-align: {{ section.settings.alignment }};
          flex-direction: {{ section.settings.icon_position }};
          align-items: {% if section.settings.icon_position == 'row' %}{{ section.settings.icon_vertical_align }}{% else %}{{ section.settings.alignment | replace: 'left', 'flex-start' | replace: 'right', 'flex-end' | replace: 'center', 'center' }}{% endif %};
          gap: 15px;
        "
      >
        <div
          class="feature-icon"
          style="
            justify-content: {{ section.settings.alignment | replace: 'left', 'flex-start' | replace: 'right', 'flex-end' | replace: 'center', 'center' }};
            flex-shrink: 0;
            width: {{ block.settings.icon_width }}px;
            height: {{ block.settings.icon_height }}px;
          "
        >
          {% if block.settings.icon_svg == 'shipping' %}
            <img
              src="{{ 'svgs/Shipping.svg' | asset_url }}"
              alt="Shipping"
              width="50"
              height="50"
              style="width: 100%; height: 100%; object-fit: contain;"
              loading="lazy"
            >
          {% elsif block.settings.icon_svg == 'quality' %}
            <img
              src="{{ 'svgs/quality.svg' | asset_url }}"
              alt="Quality"
              width="50"
              height="50"
              style="width: 100%; height: 100%; object-fit: contain;"
              loading="lazy"
            >
          {% elsif block.settings.icon_svg == 'payment' %}
            <img
              src="{{ 'svgs/payemnt.svg' | asset_url }}"
              alt="Payment"
              width="50"
              height="50"
              style="width: 100%; height: 100%; object-fit: contain;"
              loading="lazy"
            >
          {% elsif block.settings.icon != blank %}
            {{
              block.settings.icon
              | image_url: width: block.settings.icon_width
              | image_tag: loading: 'lazy', style: 'width: 100%; height: 100%; object-fit: contain;'
            }}
          {% endif %}
        </div>

        <div class="feature-content">
          {% if block.settings.title != blank %}
            <h3
              class="feature-title h4"
              style="
                font-size: {{ section.settings.heading_size }}px;
                color: {{ section.settings.heading_color }};
                font-weight: {{ section.settings.heading_weight }};
                text-transform: {{ section.settings.heading_transform }};
                margin-top: 0;
              "
            >
              {{ block.settings.title }}
            </h3>
          {% endif %}
          {% if block.settings.text != blank %}
            <div
              class="feature-text rte"
              style="
                font-size: {{ section.settings.text_size }}px;
                color: {{ section.settings.text_color }};
              "
            >
              {{ block.settings.text }}
            </div>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<style>
  .features-section {
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;

  }
  .feature-item {
    padding: 1rem;
    display: flex;
    height: 100%;
  }
  .feature-icon {
    display: flex;
    align-items: center;
  }
  .feature-content {
    display: flex;
    flex-direction: column;
    width: 100%;
  }
  .feature-title {
    margin-bottom: 0.5rem;
  }

  @media screen and (max-width: 768px) {
    .features-section {
      padding-top: {{ section.settings.padding_top | times: 0.75 }}px;
      padding-bottom: {{ section.settings.padding_bottom | times: 0.75 }}px;
    }
  }
</style>

{% schema %}
{
  "name": "Features",
  "max_blocks": 12,
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "icon_position",
      "label": "Icon Position",
      "options": [
        { "value": "column", "label": "Top" },
        { "value": "row", "label": "Left" }
      ],
      "default": "column"
    },
    {
      "type": "select",
      "id": "icon_vertical_align",
      "label": "Icon Vertical Alignment (Left Position)",
      "options": [
        { "value": "flex-start", "label": "Top" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "Bottom" }
      ],
      "default": "flex-start"
    },
    {
      "type": "select",
      "id": "alignment",
      "label": "Content Alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "grid_alignment",
      "label": "Grid Alignment",
      "options": [
        { "value": "flex-start", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "Right" },
        { "value": "space-between", "label": "Space Between" },
        { "value": "space-around", "label": "Space Around" }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "grid_gap",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Grid Gap",
      "default": 90
    },
    {
      "type": "header",
      "content": "Section Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top Padding",
      "default": 64
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom Padding",
      "default": 64
    },
    {
      "type": "header",
      "content": "Heading Typography"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 12,
      "max": 40,
      "step": 1,
      "unit": "px",
      "label": "Heading Size",
      "default": 18
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "heading_weight",
      "min": 100,
      "max": 900,
      "step": 100,
      "label": "Heading Weight",
      "default": 600
    },
    {
      "type": "select",
      "id": "heading_transform",
      "label": "Heading Transform",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "uppercase", "label": "Uppercase" },
        { "value": "lowercase", "label": "Lowercase" },
        { "value": "capitalize", "label": "Capitalize" }
      ],
      "default": "none"
    },
    {
      "type": "header",
      "content": "Text Typography"
    },
    {
      "type": "range",
      "id": "text_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Text Size",
      "default": 14
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#666666"
    }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature",
      "settings": [
        {
          "type": "select",
          "id": "icon_svg",
          "label": "Icon SVG",
          "options": [
            { "value": "none", "label": "None / Use Image" },
            { "value": "shipping", "label": "Shipping" },
            { "value": "quality", "label": "Quality" },
            { "value": "payment", "label": "Payment" }
          ],
          "default": "none"
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Image Icon"
        },
        {
          "type": "header",
          "content": "Icon Sizing"
        },
        {
          "type": "range",
          "id": "icon_width",
          "min": 20,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Icon Width",
          "default": 50
        },
        {
          "type": "range",
          "id": "icon_height",
          "min": 20,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Icon Height",
          "default": 50
        },
        {
          "type": "text",
          "id": "title",
          "default": "Free Shipping",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "text",
          "default": "<p>On all orders over $100</p>",
          "label": "Text"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Features",
      "blocks": [
        {
          "type": "feature",
          "settings": {
            "title": "Free Shipping",
            "text": "<p>On all orders over $100</p>",
            "icon_svg": "shipping"
          }
        },
        {
          "type": "feature",
          "settings": {
            "title": "Premium Quality",
            "text": "<p>Certified top materials</p>",
            "icon_svg": "quality"
          }
        },
        {
          "type": "feature",
          "settings": {
            "title": "Secure Payments",
            "text": "<p>100% protected transactions</p>",
            "icon_svg": "payment"
          }
        }
      ]
    }
  ]
}
{% endschema %}
